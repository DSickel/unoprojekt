@(message: String)
@main("Chatroom") {
	
	<h1>Chat Room Test</h1>
	<div id="socket-output">
		<p>Chatfenster:</p>
	</div>
	<div id="chatfenster">
		<input id="socket-input" type="text"/>
		<button id="input">Send</button>
	</div>
	<script type="text/javascript">
	$(function(){

	    var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket;
	    
	 	//open connection with websocket
	    var socket = new WS('@routes.Application.webSocket().webSocketURL(request)');
	    
	    var writeMessages = function(event){
	        $('#socket-output').append('<p>'+"@message"+": "+event.data+'</p>');
	    }
	    
	    socket.onmessage = writeMessages;
	    
	    $("#input").click(function(event){
	            socket.send($("#socket-input").val());
	            $("#socket-input").val('');    
	    }); 
	    
	    $('#socket-input').keyup(function(event){
	        var charCode = (event.which) ? event.which : event.keyCode ;
	       
	        // if enter (charcode 13) is pushed, send message, then clear input field
	        if(charCode === 13){
	            socket.send($(this).val());
	            $(this).val('');    
	        }
	    }); 
	});
	</script>
}